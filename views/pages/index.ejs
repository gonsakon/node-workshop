<h1><%= ogheadTitle %></h1> 
<!-- <img src="images/banner141229.jpg" alt=""> -->
<ul>
<% for(var i=0; i<listdata.length; i++) {%> 
  <li><%= listdata[i] %></li>
<% } %>
</ul>
<h1>傳統方式送出</h1>
<form action="/post" method='post'>
  <span>請輸入密碼</span>
  <input type="text" name="password">
  <input type="submit" vlaue="送出">
</form>

<h1>jQuery ajax送出</h1>
<input type="text" id="password">
<input type="button" id="send" value="送出">

<h1>取得資料</h1>
<input type="button" id="getData" value="取得電話資料">
<input type="button" id="getJson" value="取得Json">
<ul id="list"></ul>

<h1>上傳文件(PDF、Word)</h1>
<span>
  upload
  <input type="file" required accept="application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword" id="fieldUpload" data-url="/upload" multiple>
</sapn>
<ul id="uploadList"></ul>

<script>
  jQuery(document).ready(function($) {
    $('#send').on('click', function(event) {
      event.preventDefault();
      var str = $('#password').val();
      console.log(str);
      $.post('/postAjax', {'password': str}).success(function(data){
        console.log(data);
        if(data=='success'){
        alert('密碼輸入成功')
        }else{
          alert('密碼輸入錯誤')
        }
      });
    });
    $('#getData').on('click', function(event) {
      event.preventDefault();
      $.get('/getAjax').success(function(data){
        // console.log(data)
        $('#list').children().remove()
        for(i=0;data.length>i;i++){
          $('#list').append('<li>姓名：'+data[i].name+' 電話：'+data[i].tel);
        }
      });
    });
    $('#getJson').on('click', function(event) {
      event.preventDefault();
      $.get('/getJson').success(function(data){
        // console.log(data)
        $('#list').children().remove()
        for(i=0;data.length>i;i++){
          $('#list').append('<li>名稱：'+data[i].name+' 價錢：'+data[i].price);
        }
      });
    });
    $('#fieldUpload').fileupload({
      dataType: 'json',
      done: function(e, data){
        $.each(data.result.files, function(index, file){
          $('#uploadList').append(
            '<li>' + 
              '<a href="/upload/' + file.originalName + '" target="_blank">' 
              + file.originalName + '</a>' + 
            '</li>'
          );
        })
      }
    })
  });
</script>